<!DOCTYPE html>
<html lang="en">
  <head>
      <title>Examples &#45; Pilosa</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="title" content="Pilosa">
    <meta name="description" content="Examples Transportation Introduction New York City released an extremely detailed data set of over 1 billion taxi rides taken in the city - this data has become a popular target for analysis by tech bloggers and has been very well studied. For this reason, we thought it would be interesting to import this data to Pilosa in order to compare with other data stores and techniques on the exact same data set.">
    <meta name="keywords" content="Pilosa,index,bitmap index,database,distributed database,distributed index,distributed bitmap index,queries,big data">
    <meta property="og:title" content="Examples"/>
    <meta property="og:description" content="Examples Transportation Introduction New York City released an extremely detailed data set of over 1 billion taxi rides taken in the city - this data has become a popular target for analysis by tech bloggers and has been very well studied. For this reason, we thought it would be interesting to import this data to Pilosa in order to compare with other data stores and techniques on the exact same data set." />
    <meta property="og:url" content="https://www.pilosa.com/docs/v1.0/examples/"/>
    <meta property="og:image" content="https://www.pilosa.com/img/logo-medium.png"/>
    <meta property="og:site_name" content="Pilosa">
    <meta property="og:updated_time" content="0001-01-01T00:00:00Z"/>
    <meta property="og:app_id" content="238103373333819" />
    <meta name="twitter:site" content="@Slothware" />
    <meta name="twitter:card" content="summary" />
    <link rel="stylesheet" href="/css/bootstrap-pilosa.css" >
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,700|Roboto+Mono" rel="stylesheet">
    <script src="https://use.typekit.net/xyn6sfs.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>
    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="https://www.pilosa.com/">
    <link rel="icon" type="image/png" href="/img/favicon.png">

    
    <link href="https://www.pilosa.com/index.xml" rel="alternate" type="application/rss+xml" title="Pilosa" />
    <link href="https://www.pilosa.com/index.xml" rel="feed" type="application/rss+xml" title="Pilosa" />
    
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window,document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
     fbq('init', '790180054464967'); 
    fbq('track', 'PageView');
    </script>
    <noscript>
     <img height="1" width="1" 
    src="https://www.facebook.com/tr?id=790180054464967&ev=PageView
    &noscript=1"/>
    </noscript>
    

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />

  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-96186501-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

  </head>
  <body>
    <header >

      <nav class="container navbar navbar-toggleable-md navbar-light mt-4 mb-3 d-flex" >
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>


        <a class="navbar-brand " href="/">
          <img  height='35px'  id="logo" src="/img/logo.svg" alt="Continuous Analysis on Really Big Data" title="Pilosa logo" class="d-inline-block align-center">
        </a>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item ">
              <a href="/about/" class="nav-link">About <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item ">
              <a href="/use-cases/" class="nav-link">Use Cases</a>
            </li>
            <li class="nav-item  active">
              <a href="/docs/introduction/" class="nav-link">Docs</a>
            </li>
            <li class="nav-item ">
              <a href="/community/" class="nav-link">Community</a>
            </li>
            <li class="nav-item ">
              <a href="https://www.molecula.com/" class="nav-link">Enterprise</a>
            </li>
            <li class="nav-item ">
              <a href="/blog/" class="nav-link">Blog</a>
            </li>
            <li class="nav-item">
              <a href="/about/#contact" class="nav-link">Contact</a>
            </li>
          </ul>
          
        </div>
      </nav>
    </header>

<div  class="page-container">

  <div class="docs-nav-mobile py-2">
    <center>

      <input class="docsearch-input-mobile docsearch-input" type="text" placeholder="Search" />
      <i class="docsearch-icon fa fa-search"></i>

      <div class="dropdown">
        <button class="dropdown-nav btn  dropdown-toggle " type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <div class='inner-dropdown-nav'>
            Examples
            <i class="fa fa-chevron-down" aria-hidden="true"></i>
          </div>
        </button>
        <div  class="dropdown-menu-nav dropdown-menu " aria-labelledby="dropdownMenuButton">
        

<ul>
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/introduction/" >Introduction</a>
            <ul>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/installation/" >Installation</a>
            <ul>
            
              
              <li>
                <a href="/docs/v1.0/installation/#installing-on-macos">Installing on MacOS</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/installation/#installing-on-linux">Installing on Linux</a>
              </li>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/getting-started/" >Getting Started</a>
            <ul>
            
              
              <li>
                <a href="/docs/v1.0/getting-started/#starting-pilosa">Starting Pilosa</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/getting-started/#sample-project">Sample Project</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/getting-started/#what-s-next">What&#39;s Next?</a>
              </li>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/examples/"  class="docs-active" >Examples</a>
            <ul>
            
              
              <li>
                <a href="/docs/v1.0/examples/#transportation">Transportation</a>
              </li>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/tutorials/" >Tutorials</a>
            <ul>
            
              
              <li>
                <a href="/docs/v1.0/tutorials/#setting-up-a-secure-cluster">Setting Up a Secure Cluster</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/tutorials/#setting-up-a-docker-cluster">Setting Up a Docker Cluster</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/tutorials/#using-integer-field-values">Using Integer Field Values</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/tutorials/#storing-row-and-column-attributes">Storing Row and Column Attributes</a>
              </li>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/data-model/" >Data Model</a>
            <ul>
            
              
              <li>
                <a href="/docs/v1.0/data-model/#overview">Overview</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/data-model/#index">Index</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/data-model/#column">Column</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/data-model/#row">Row</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/data-model/#field">Field</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/data-model/#time-quantum">Time Quantum</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/data-model/#attribute">Attribute</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/data-model/#shard">Shard</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/data-model/#view">View</a>
              </li>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/architecture/" >Architecture</a>
            <ul>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/query-language/" >Query Language</a>
            <ul>
            
              
              <li>
                <a href="/docs/v1.0/query-language/#conventions">Conventions</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/query-language/#arguments-and-types">Arguments and Types</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/query-language/#write-operations">Write Operations</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/query-language/#read-operations">Read Operations</a>
              </li>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/configuration/" >Configuration</a>
            <ul>
            
              
              <li>
                <a href="/docs/v1.0/configuration/#command-line-flags">Command line flags</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/configuration/#environment-variables">Environment variables</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/configuration/#config-file">Config file</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/configuration/#all-options">All Options</a>
              </li>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/console/" >Console</a>
            <ul>
            
              
              <li>
                <a href="/docs/v1.0/console/#installation">Installation</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/console/#query">Query</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/console/#cluster-admin">Cluster Admin</a>
              </li>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/api-reference/" >API Reference</a>
            <ul>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/pdk/" >PDK</a>
            <ul>
            
              
              <li>
                <a href="/docs/v1.0/pdk/#examples-and-executables">Examples and Executables</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/pdk/#library">Library</a>
              </li>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/client-libraries/" >Client Libraries</a>
            <ul>
            
              
              <li>
                <a href="/docs/v1.0/client-libraries/#go">Go</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/client-libraries/#python">Python</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/client-libraries/#java">Java</a>
              </li>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/administration/" >Administration</a>
            <ul>
            
              
              <li>
                <a href="/docs/v1.0/administration/#installing-in-production">Installing in production</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/administration/#importing-and-exporting-data">Importing and Exporting Data</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/administration/#versioning">Versioning</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/administration/#resizing-the-cluster">Resizing the Cluster</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/administration/#backup%2frestore">Backup/restore</a>
              </li>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/glossary/" >Glossary</a>
            <ul>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/faq/" >FAQ</a>
            <ul>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
  
</ul>

        </div>
      </div>
    </center>


  </div>
  </div>
  <div class="docs-wrapper">
  <div class="row container ">
    <div class="docs-nav-container  col-4">

      <div class="docsearch-container">
        <input class="docsearch-input-desktop docsearch-input" type="text" placeholder="Search" />
        <i class="docsearch-icon fa fa-search"></i>
      </div>

      <div  class='docs-nav' id="doc-nav">
        

<ul>
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/introduction/" >Introduction</a>
            <ul>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/installation/" >Installation</a>
            <ul>
            
              
              <li>
                <a href="/docs/v1.0/installation/#installing-on-macos">Installing on MacOS</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/installation/#installing-on-linux">Installing on Linux</a>
              </li>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/getting-started/" >Getting Started</a>
            <ul>
            
              
              <li>
                <a href="/docs/v1.0/getting-started/#starting-pilosa">Starting Pilosa</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/getting-started/#sample-project">Sample Project</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/getting-started/#what-s-next">What&#39;s Next?</a>
              </li>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/examples/"  class="docs-active" >Examples</a>
            <ul>
            
              
              <li>
                <a href="/docs/v1.0/examples/#transportation">Transportation</a>
              </li>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/tutorials/" >Tutorials</a>
            <ul>
            
              
              <li>
                <a href="/docs/v1.0/tutorials/#setting-up-a-secure-cluster">Setting Up a Secure Cluster</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/tutorials/#setting-up-a-docker-cluster">Setting Up a Docker Cluster</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/tutorials/#using-integer-field-values">Using Integer Field Values</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/tutorials/#storing-row-and-column-attributes">Storing Row and Column Attributes</a>
              </li>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/data-model/" >Data Model</a>
            <ul>
            
              
              <li>
                <a href="/docs/v1.0/data-model/#overview">Overview</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/data-model/#index">Index</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/data-model/#column">Column</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/data-model/#row">Row</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/data-model/#field">Field</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/data-model/#time-quantum">Time Quantum</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/data-model/#attribute">Attribute</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/data-model/#shard">Shard</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/data-model/#view">View</a>
              </li>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/architecture/" >Architecture</a>
            <ul>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/query-language/" >Query Language</a>
            <ul>
            
              
              <li>
                <a href="/docs/v1.0/query-language/#conventions">Conventions</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/query-language/#arguments-and-types">Arguments and Types</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/query-language/#write-operations">Write Operations</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/query-language/#read-operations">Read Operations</a>
              </li>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/configuration/" >Configuration</a>
            <ul>
            
              
              <li>
                <a href="/docs/v1.0/configuration/#command-line-flags">Command line flags</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/configuration/#environment-variables">Environment variables</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/configuration/#config-file">Config file</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/configuration/#all-options">All Options</a>
              </li>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/console/" >Console</a>
            <ul>
            
              
              <li>
                <a href="/docs/v1.0/console/#installation">Installation</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/console/#query">Query</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/console/#cluster-admin">Cluster Admin</a>
              </li>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/api-reference/" >API Reference</a>
            <ul>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/pdk/" >PDK</a>
            <ul>
            
              
              <li>
                <a href="/docs/v1.0/pdk/#examples-and-executables">Examples and Executables</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/pdk/#library">Library</a>
              </li>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/client-libraries/" >Client Libraries</a>
            <ul>
            
              
              <li>
                <a href="/docs/v1.0/client-libraries/#go">Go</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/client-libraries/#python">Python</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/client-libraries/#java">Java</a>
              </li>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/administration/" >Administration</a>
            <ul>
            
              
              <li>
                <a href="/docs/v1.0/administration/#installing-in-production">Installing in production</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/administration/#importing-and-exporting-data">Importing and Exporting Data</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/administration/#versioning">Versioning</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/administration/#resizing-the-cluster">Resizing the Cluster</a>
              </li>
            
              
              <li>
                <a href="/docs/v1.0/administration/#backup%2frestore">Backup/restore</a>
              </li>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/glossary/" >Glossary</a>
            <ul>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
          
          <li>
            <a href="/docs/v1.0/faq/" >FAQ</a>
            <ul>
            
            </ul>
          </li>
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
  
</ul>

        <div class="docs-nav-btn-container">
          <a href="/community/#support" class="btn-pilosa btn btn-success">Get support</a>
        </div>

      </div>
    </div>

    <div   class='single-body-content col-lg-8 pl-4 py-5' id="content">
      
      
          <div class="warning">
              You are viewing the documentation for Pilosa v1.0. View the <a href="/docs/latest/examples/">latest documentation for Pilosa v1.4.0</a>.


          </div>
      
      <h2 id="examples">Examples</h2>
<h3 id="transportation">Transportation</h3>
<h4 id="introduction">Introduction</h4>
<p>New York City released an extremely detailed data set of over 1 billion taxi rides taken in the city - this data has become a popular target for analysis by tech bloggers and has been very well studied. For this reason, we thought it would be interesting to import this data to Pilosa in order to compare with other data stores and techniques on the exact same data set.</p>
<p>Transportation in general is a compelling use case for Pilosa as it often involves multiple disparate data sources, as well as high rate, real time, and extremely large amounts of data (particularly if one wants to draw reasonable conclusions).</p>
<p>We&rsquo;ve written a tool to help import the NYC taxi data into Pilosa - this tool is part of the <a href="../pdk/">PDK</a> (Pilosa Development Kit), and takes advantage of a number of reusable modules that may help you import other data as well. Follow along and we&rsquo;ll explain the whole process step by step.</p>
<p>After initial setup, the PDK import tool does everything we need to define a Pilosa schema, map data to bitmaps accordingly, and import it into Pilosa.</p>
<h4 id="data-model">Data Model</h4>
<p>The NYC taxi data is comprised of a number of csv files listed here: <a href="http://www.nyc.gov/html/tlc/html/about/trip_record_data.shtml">http://www.nyc.gov/html/tlc/html/about/trip_record_data.shtml</a>. These data files have around 20 columns, about half of which are relevant to the benchmark queries we&rsquo;re looking at:</p>
<ul>
<li>Distance: miles, floating point</li>
<li>Fare: dollars, floating point</li>
<li>Number of passengers: integer</li>
<li>Dropoff location: latitude and longitude, floating point</li>
<li>Pickup location: latitude and longitude, floating point</li>
<li>Dropoff time: timestamp</li>
<li>Pickup time: timestamp</li>
</ul>
<p>We import these fields, creating one or more Pilosa fields from each of them:</p>
<table>
<thead>
<tr>
<th>field</th>
<th>mapping</th>
</tr>
</thead>
<tbody>
<tr>
<td>cab_type</td>
<td>direct map of enum int → row ID</td>
</tr>
<tr>
<td>dist_miles</td>
<td>round(dist) → row ID</td>
</tr>
<tr>
<td>total_amount_dollars</td>
<td>round(dist) → row ID</td>
</tr>
<tr>
<td>passenger_count</td>
<td>direct map of integer value → row ID</td>
</tr>
<tr>
<td>drop_grid_id</td>
<td>(lat, lon) → 100x100 rectangular grid → cell ID</td>
</tr>
<tr>
<td>drop_year</td>
<td>year(timestamp) → row ID</td>
</tr>
<tr>
<td>drop_month</td>
<td>month(timestamp) → row ID</td>
</tr>
<tr>
<td>drop_day</td>
<td>day(timestamp) → row ID</td>
</tr>
<tr>
<td>drop_time</td>
<td>time of day mapped to one of 48 half-hour buckets</td>
</tr>
<tr>
<td>pickup_grid_id</td>
<td>(lat, lon) → 100x100 rectangular grid → cell ID</td>
</tr>
<tr>
<td>pickup_year</td>
<td>year(timestamp) → row ID</td>
</tr>
<tr>
<td>pickup_month</td>
<td>month(timestamp) → row ID</td>
</tr>
<tr>
<td>pickup_day</td>
<td>day(timestamp) → row ID</td>
</tr>
<tr>
<td>pickup_time</td>
<td>time of day mapped to one of 48 half-hour buckets → row ID</td>
</tr>
</tbody>
</table>
<p>We also created two extra fields that represent the duration and average speed of each ride:</p>
<table>
<thead>
<tr>
<th>field</th>
<th>mapping</th>
</tr>
</thead>
<tbody>
<tr>
<td>duration_minutes</td>
<td>round(drop_timestamp - pickup_timestamp) → row ID</td>
</tr>
<tr>
<td>speed_mph</td>
<td>round(dist_miles / (drop_timestamp - pickup_timestamp)) → row ID</td>
</tr>
</tbody>
</table>
<h4 id="mapping">Mapping</h4>
<p>Each column that we want to use must be mapped to a combination of fields and row IDs according to some rule. There are many ways to approach this mapping, and the taxi dataset gives us a good overview of possibilities.</p>
<h5 id="0-columns--1-field">0 columns → 1 field</h5>
<p><strong>cab_type</strong>: contains one row for each type of cab. Each column, representing one ride, has a bit set in exactly one row of this field. The mapping is a simple enumeration, for example yellow=0, green=1, etc. The values of the bits in this field are determined by the source of the data. That is, we&rsquo;re importing data from several disparate sources: NYC yellow taxi cabs, NYC green taxi cabs, and Uber cars. For each source, the single row to be set in the cab_type field is constant.</p>
<h5 id="1-column--1-field">1 column → 1 field</h5>
<p>The following three fields are mapped in a simple direct way from single columns of the original data.</p>
<p><strong>dist_miles:</strong> each row represents rides of a certain distance. The mapping is simple: as an example, row 1 represents rides with a distance in the interval [0.5, 1.5]. That is, we round the floating point value of distance to an integer, and use that as the row ID directly. Generally, the mapping from a floating point value to a row ID could be arbitrary. The rounding mapping is concise to implement, which simplifies importing and analysis. As an added bonus, it&rsquo;s human-readable. We&rsquo;ll see this pattern used several times.</p>
<p>In PDK parlance, we define a Mapper, which is simply a function that returns integer row IDs. PDK has a number of predefined mappers that can be described with a few parameters. One of these is LinearFloatMapper, which applies a linear function to the input, and casts it to an integer, so the rounding is handled implicitly. In code:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">lfm</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">pdk</span>.<span style="color:#a6e22e">LinearFloatMapper</span>{
    <span style="color:#a6e22e">Min</span>: <span style="color:#f92672">-</span><span style="color:#ae81ff">0.5</span>,
    <span style="color:#a6e22e">Max</span>: <span style="color:#ae81ff">3600.5</span>,
    <span style="color:#a6e22e">Res</span>: <span style="color:#ae81ff">3601</span>,
}
</code></pre></div><p><code>Min</code> and <code>Max</code> define the linear function, and <code>Res</code> determines the maximum allowed value for the output row ID - we chose these values to produce a “round to nearest integer” behavior. Other predefined mappers have their own specific parameters, usually two or three.</p>
<p>This mapper function is the core operation, but we need a few other pieces to define the overall process, which is encapsulated in the BitMapper object. This object defines which field(s) of the input data source to use (<code>Fields</code>), how to parse them (<code>Parsers</code>), what mapping to use (<code>Mapper</code>), and the name of the field to use (<code>Frame</code>).  TODO update so this makes sense</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">pdk</span>.<span style="color:#a6e22e">BitMapper</span>{
    <span style="color:#a6e22e">Frame</span>:   <span style="color:#e6db74">&#34;dist_miles&#34;</span>,
    <span style="color:#a6e22e">Mapper</span>:  <span style="color:#a6e22e">lfm</span>,
    <span style="color:#a6e22e">Parsers</span>: []<span style="color:#a6e22e">pdk</span>.<span style="color:#a6e22e">Parser</span>{<span style="color:#a6e22e">pdk</span>.<span style="color:#a6e22e">FloatParser</span>{}},
    <span style="color:#a6e22e">Fields</span>:  []<span style="color:#66d9ef">int</span>{<span style="color:#a6e22e">fields</span>[<span style="color:#e6db74">&#34;trip_distance&#34;</span>]},
},
</code></pre></div><p>These same objects are represented in the JSON definition file:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">{
    <span style="color:#e6db74">&#34;Fields&#34;</span>: {
        <span style="color:#e6db74">&#34;Trip_distance&#34;</span>: <span style="color:#ae81ff">10</span>
    },
    <span style="color:#e6db74">&#34;Mappers&#34;</span>: [
        {
            <span style="color:#e6db74">&#34;Name&#34;</span>: <span style="color:#e6db74">&#34;lfm0&#34;</span>,
            <span style="color:#e6db74">&#34;Min&#34;</span>: <span style="color:#f92672">-</span><span style="color:#ae81ff">0.5</span>,
            <span style="color:#e6db74">&#34;Max&#34;</span>: <span style="color:#ae81ff">3600.5</span>,
            <span style="color:#e6db74">&#34;Res&#34;</span>: <span style="color:#ae81ff">3600</span>
        }
    ],
    <span style="color:#e6db74">&#34;BitMappers&#34;</span>: [
        {
            <span style="color:#e6db74">&#34;Frame&#34;</span>: <span style="color:#e6db74">&#34;dist_miles&#34;</span>,
            <span style="color:#e6db74">&#34;Mapper&#34;</span>: {
                <span style="color:#e6db74">&#34;Name&#34;</span>: <span style="color:#e6db74">&#34;lfm0&#34;</span>
            },
            <span style="color:#e6db74">&#34;Parsers&#34;</span>: [
                {<span style="color:#e6db74">&#34;Name&#34;</span>: <span style="color:#e6db74">&#34;FloatParser&#34;</span>}
            ],
            <span style="color:#e6db74">&#34;Fields&#34;</span>: <span style="color:#e6db74">&#34;Trip_distance&#34;</span>
        }
    ]
}
</code></pre></div><p>Here, we define a list of Mappers, each including a name, which we use to refer to the mapper later, in the list of BitMappers. We can also do this with Parsers, but a few simple Parsers that need no configuration are available by default. We also have a list of Fields, which is simply a map of field names (in the source data) to column indices (in Pilosa). We use these names in the BitMapper definitions to keep things human-readable.</p>
<p><strong>total_amount_dollars:</strong> Here we use the rounding mapping again, so each row represents rides with a total cost that rounds to the row&rsquo;s ID. The BitMapper definition is very similar to the previous one.</p>
<p><strong>passenger_count:</strong> This column contains small integers, so we use one of the simplest possible mappings: the column value is the row ID.</p>
<h5 id="1-column--multiple-fields">1 column → multiple fields</h5>
<p>When working with a composite data type like a timestamp, there are plenty of mapping options. In this case, we expect to see interesting periodic trends, so we want to encode the cyclic components of time in a way that allows us to look at them independently during analysis.</p>
<p>We do this by storing time data in four separate fields for each timestamp: one each for the year, month, day, and time of day. The first three are mapped directly. For example, a ride with a date of 2015/06/24 will have a bit set in row 2015 of field &ldquo;year&rdquo;, row 6 of field &ldquo;month&rdquo;, and row 24 of field &ldquo;day&rdquo;.</p>
<p>We might continue this pattern with hours, minutes, and seconds, but we don&rsquo;t have much use for that level of precision here, so instead we use a &ldquo;bucketing&rdquo; approach. That is, we pick a resolution (30 minutes), divide the day into buckets of that size, and create a row for each one. So a ride with a time of 6:45AM has a bit set in row 13 of field &ldquo;time_of_day&rdquo;.</p>
<p>We do all of this for each timestamp of interest, one for pickup time and one for dropoff time. That gives us eight total fields for two timestamps: pickup_year, pickup_month, pickup_day, pickup_time, drop_year, drop_month, drop_day, drop_time.</p>
<h5 id="multiple-columns--1-field">Multiple columns → 1 field</h5>
<p>The ride data also contains geolocation data: latitude and longitude for both pickup and dropoff. We just want to be able to produce a rough overview heatmap of ride locations, so we use a grid mapping. We divide the area of interest into a 100x100 grid in latitude-longitude space, label each cell in this grid with a single integer, and use that integer as the row ID.</p>
<p>We do all of this for each location of interest, one for pickup and one for dropoff. That gives us two fields for two locations: pickup_grid_id, drop_grid_id.</p>
<p>Again, there are many mapping options for location data. For example, we might convert to a different coordinate system, apply a projection, or aggregate locations into real-world regions such as neighborhoods. Here, the simple approach is sufficient.</p>
<h5 id="complex-mappings">Complex mappings</h5>
<p>We also anticipate looking for trends in ride duration and speed, so we want to capture this information during the import process. For the field <code>duration_minutes</code>, we compute a row ID as <code>round((drop_timestamp - pickup_timestamp).minutes)</code>. For the field <code>speed_mph</code>, we compute row ID as <code>round(dist_miles / (drop_timestamp - pickup_timestamp).minutes)</code>. These mapping calculations are straightforward, but because they require arithmetic operations on multiple columns, they are a bit too complex to capture in the basic mappers available in PDK. Instead, we define custom mappers to do the work:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">durm</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">pdk</span>.<span style="color:#a6e22e">CustomMapper</span>{
    <span style="color:#a6e22e">Func</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">fields</span> <span style="color:#f92672">...</span><span style="color:#66d9ef">interface</span>{}) <span style="color:#66d9ef">interface</span>{} {
        <span style="color:#a6e22e">start</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">fields</span>[<span style="color:#ae81ff">0</span>].(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Time</span>)
        <span style="color:#a6e22e">end</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">fields</span>[<span style="color:#ae81ff">1</span>].(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Time</span>)
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">end</span>.<span style="color:#a6e22e">Sub</span>(<span style="color:#a6e22e">start</span>).<span style="color:#a6e22e">Minutes</span>()
    },
    <span style="color:#a6e22e">Mapper</span>: <span style="color:#a6e22e">lfm</span>,
}
</code></pre></div><h4 id="import-process">Import process</h4>
<p>After designing this schema and mapping, we capture it in a JSON definition file that can be read by the PDK import tool. Running <code>pdk taxi</code> runs the import based on the information in this file. For more details, see the <a href="../pdk/">PDK</a> section, or check out the <a href="https://github.com/pilosa/pdk/tree/master/usecase/taxi">code</a> itself.</p>
<h4 id="queries">Queries</h4>
<p>Now we can run some example queries.</p>
<p>Count per cab type can be retrieved, sorted, with a single PQL call.</p>
<pre><code class="language-request" data-lang="request">TopN(cab_type)
</code></pre><pre><code class="language-response" data-lang="response">{&quot;results&quot;:[[{&quot;id&quot;:1,&quot;count&quot;:1992943},{&quot;id&quot;:0,&quot;count&quot;:7057}]]}
</code></pre><p>High traffic location IDs can be retrieved with a similar call. These IDs correspond to latitude, longitude pairs, which can be recovered from the mapping that generates the IDs.</p>
<pre><code class="language-request" data-lang="request">TopN(pickup_grid_id)
</code></pre><pre><code class="language-response" data-lang="response">{&quot;results&quot;:[[{&quot;id&quot;:5060,&quot;count&quot;:40620},{&quot;id&quot;:4861,&quot;count&quot;:38145},{&quot;id&quot;:4962,&quot;count&quot;:35268},...]]}
</code></pre><p>Average of <code>total_amount</code> per <code>passenger_count</code> can be computed with some postprocessing. We use a small number of <code>TopN</code> calls to retrieve counts of rides by passenger_count, then use those counts to compute an average.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">queries <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
pcounts <span style="color:#f92672">=</span> range(<span style="color:#ae81ff">10</span>)
<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> pcounts:
    queries <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#34;TopN(Row(passenger_count=</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">), total_amount_dollars)&#34;</span> <span style="color:#f92672">%</span> i
resp <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>post(qurl, data<span style="color:#f92672">=</span>queries)

average_amounts <span style="color:#f92672">=</span> []
<span style="color:#66d9ef">for</span> pcount, topn <span style="color:#f92672">in</span> zip(pcounts, resp<span style="color:#f92672">.</span>json()[<span style="color:#e6db74">&#39;results&#39;</span>]):
    wsum <span style="color:#f92672">=</span> sum([r[<span style="color:#e6db74">&#39;count&#39;</span>] <span style="color:#f92672">*</span> r[<span style="color:#e6db74">&#39;key&#39;</span>] <span style="color:#66d9ef">for</span> r <span style="color:#f92672">in</span> topn])
    count <span style="color:#f92672">=</span> sum([r[<span style="color:#e6db74">&#39;count&#39;</span>] <span style="color:#66d9ef">for</span> r <span style="color:#f92672">in</span> topn])
    average_amounts<span style="color:#f92672">.</span>append(float(wsum)<span style="color:#f92672">/</span>count)
</code></pre></div><!-- raw HTML omitted -->
<p>For more examples and details, see this <a href="https://github.com/pilosa/notebooks/blob/master/taxi-use-case.ipynb">ipython notebook</a>.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->


	  <hr />
          <div class="info">
              
              
              <a href="https://github.com/pilosa/pilosa/tree/v1.0/docs/examples.md">View markdown source</a> on Github. Last updated 2 years, 10 months ago.
          </div>
    </div>
  </div>
</div>


</div>

<footer   >
  <div  class='container py-5' >
    <div class="footer-row ">
      <div  class='brand mb-4'>
        <a href="/"><img width='150px' src="/img/logo_white_inverse.svg" alt="Continuous Analysis on Really Big Data"></a>
        <div class="footer-install-container">
          <a href="/docs/installation/" class="btn-pilosa btn btn-info mt-4 col">Install</a>
        </div>
      </div>
      <div class='links mb-4'>
        <div class="category">
          <a class='category-header' href="/docs/getting-started/">Get Started</a>
          <a href="/docs/installation/">Install</a>
          <a href="/docs/getting-started/">Getting Started</a>
          <a href="/docs/faq/">FAQ</a>
          <a href="/community/#support">Support</a>
        </div>
        <div class="category">
          <a class='category-header' href="/community/">Community</a>
          <a href="/community/code-of-conduct/">Code of Conduct</a>
          <a href="/blog/">Blog</a>
          <a href="https://github.com/pilosa/">Github</a>
          <a href="https://twitter.com/slothware">Twitter</a>
        </div>
        <div class="category">
          <a class="category-header" >Product</a>
          <a href="/pdf/PILOSA%20-%20Technical%20White%20Paper.pdf">White Paper</a>
          <a href="/community/">Community</a>
          <a href="https://www.molecula.com/">Enterprise</a>
          
          <a href="/legal/">Legal</a>
        </div>
        <div class="category">
          <a class="category-header" href="/about/">Company</a>
          <a  href="/about/">About</a>
          <a  href="/careers/">Careers</a>
          <a  href="/press/">Press</a>
          <a  href="/about/#contact">Contact</a>
        </div>
      </div>
    </div>
    <div  class="footer-row">
      <p class="footer-learn-more mt-2 mb-1">Learn more about Pilosa</p>
      <form class="footer-form" action="//pilosa.us15.list-manage.com/subscribe/post?u=804d9b2d65c9213cfa08eb7c3&amp;id=12e90aaa9a" method="post">
        <input class='footer-input m-2' placeholder="Your email" name="EMAIL" type="text">
        <button  type="submit" class=" btn-pilosa btn btn-success m-2">Sign up</button>
      </form>
    </div>
    <div class="footer-icons mt-3">
      <a href="https://www.facebook.com/pilosaco"><i class="fa fa-facebook-square mr-4" aria-hidden="true"></i></a>
      <a href="https://twitter.com/slothware"><i class="fa fa-twitter mr-4" aria-hidden="true"></i></a>
      <a href="https://linkedin.com/company/pilosa"><i class="fa fa-linkedin-square mr-4" aria-hidden="true"></i></a>
      <a href="https://github.com/pilosa"><i class="fa fa-github mr-4" aria-hidden="true"></i></a>
    </div>
    <div class="footer-row legal mt-3">
      <a href="/legal/">&copy; Molecula Corp. <script type="text/javascript">document.write(new Date().getFullYear());</script> All right Reserved.</a>
      &nbsp;
      <a href="/legal/privacy/">Privacy</a>
        &nbsp;<a >and</a>  &nbsp;
      <a href="/legal/terms-of-service/">Terms of Service</a>
    </div>
  </div>


</footer>
<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>






<script type="text/javascript">
 
var google_conversion_id = 853926337;
var google_custom_params = window.google_tag_params;
var google_remarketing_only = true;
 
</script>
<script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js">
</script>
<noscript>
<div style="display:inline;">
<img height="1" width="1" style="border-style:none;" alt="" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/853926337/?guid=ON&amp;script=0"/>
</div>
</noscript>

<script src="//static.leadpages.net/leadbars/current/embed.js" data-bar="DrXNmop4qNAr8KGqa9Afxb" data-bar-domain="molecula.lpages.co" async defer></script>




<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
docsearch({
    apiKey: 'e1d9e5482fce111fb4d8030aaaf1d61a',
    indexName: 'pilosa',
    inputSelector: '.docsearch-input-desktop',
    algoliaOptions: { 'facetFilters': ["version:v1.0"] },
    debug: false 
});
docsearch({
    apiKey: 'e1d9e5482fce111fb4d8030aaaf1d61a',
    indexName: 'pilosa',
    inputSelector: '.docsearch-input-mobile',
    algoliaOptions: { 'facetFilters': ["version:v1.0"] },
    debug: false 
});
$('pre:has(code.language-request)').addClass('request')
$('pre:has(code.language-response)').addClass('response')
</script>

</body>
</html>

